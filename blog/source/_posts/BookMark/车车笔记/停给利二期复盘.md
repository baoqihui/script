### 现有存车的问题

+ 通过车辆风控但未过天域风控的重复车辆保存问题

+ 目前车辆信息表数据不单一，用户Id和禁用标识的作用

+ 车辆过户，车牌号重复，owner不同问题

### 解绑操作

1. 在原解绑操作事务中修改当前 用户 和 车牌 的状态

2. 保存车辆信息表过程需要重新梳理

   + 进行车辆风控前，是否需要先验证车辆信息是否存在

   + 保存车辆的过程是否应该放到留资成功后，而非获取到车辆信息之后

3. 同一车辆被不同用户换绑，车辆信息保存还是更新



### 复盘

1. 评审过程：未在评审前考虑详细。流程图未完全考虑清楚，多次与产品在后期修改流程

2. 开发：

   + 自有接口的对接未通过接口文档对接，未分析完所有可能情况，未进行车辆姓名的一致性校验

   + 写代码逻辑时仅考虑了字面意思，增加车辆信息前未完全确认车辆的新增或更新逻辑

3. 测试：对itg，stg环境区分有差

4. 上线出现问题：

   + 出现自有接口查到用户姓名与留资人不同但校验通过的问题。

   + 同一车辆重复问题

5. 后续做法：

   + 对接所有外部接口，尽可能通过接口文档对接。

   + 书写逻辑时还是只相信自己的校验，不可相信所调用的所有外部接口数据

   + 想问题不可以简单考虑字面意思，应先考虑异常情况，最后写正流程