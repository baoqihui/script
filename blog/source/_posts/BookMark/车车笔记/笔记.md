# 使.gitignore忽略立即生效

```
git rm -r --cached .
#git add .
#git commit -m ".gitignore is now working"
```

# Gson操作

```
String s new Gson().toJson(sendMsgReqs)
List<SendMsgReq> list = new Gson().fromJson(message, new TypeToken<List<SendMsgReq>>() {}.getType());
```

# BigDecimal

    //加法
    BigDecimal result1 = num1.add(num2);
    BigDecimal result12 = num12.add(num22);
    
    //减法
    BigDecimal result2 = num1.subtract(num2);
    BigDecimal result22 = num12.subtract(num22);
    
    //乘法
    BigDecimal result3 = num1.multiply(num2);
    BigDecimal result32 = num12.multiply(num22);
    
    //绝对值
    BigDecimal result4 = num3.abs();
    BigDecimal result42 = num32.abs();
    
    //除法
    BigDecimal result5 = num2.divide(num1,2,BigDecimal.ROUND_HALF_UP);
    BigDecimal result52 = num22.divide(num12,2,BigDecimal.ROUND_HALF_UP);

## web mvc转换

+ 第一种方式

```
@Configuration
@AutoConfigureBefore(WebMvcAutoConfiguration.class)
public static class WebMvcConfigurerAdapterAutoConfig extends WebMvcConfigurationSupport {
	/**
    * 实现json参数解析/返回时，传入的下划线转驼峰；输出的驼峰转下划线
    * @param converters 转换器
    */
    @Override
    public void extendMessageConverters(List<HttpMessageConverter<?>> converters) {
       MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
       ObjectMapper objectMapper = converter.getObjectMapper();

        // 设置驼峰标志转下划线
        objectMapper.setPropertyNamingStrategy( PropertyNamingStrategies.SNAKE_CASE);

        // 设置格式化内容
        converter.setObjectMapper(objectMapper);
        converters.add(0, converter);
        super.extendMessageConverters(converters);
   }
}
```

+ 第二种方式

```
@Bean
@Primary
public ObjectMapper objectMapper() {
    return Jackson2ObjectMapperBuilder
        .json()
        .propertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE)
        .dateFormat(new SimpleDateFormat(""))
        .build();
}
```

## set注入

```
    @Boy("hui")
    private HelloBoy helloBoy;
    @Autowired
    public void setInjectedBean() {
        this.helloBoy = new HelloBoy("hbq");
    }
```

### 自定义注解

```
package com.hbq.codedemopersion.config.anno;

@Component //注意：Bean后置处理器本身也是一个Bean
public class BoyAnnotationBeanPostProcessor implements BeanPostProcessor {
    @SneakyThrows
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
       /**
         * 利用Java反射机制注入属性
         */
        Field[] declaredFields = bean.getClass().getDeclaredFields();
        for (Field declaredField : declaredFields) {
            Boy annotation = declaredField.getAnnotation(Boy.class);
            if (null == annotation) {
                continue;
            }
            HelloBoy helloBoy = new HelloBoy(annotation.value());
            declaredField.setAccessible(true);
            try {
                declaredField.set(bean, helloBoy);
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object o, String s) throws BeansException {
        return o; //这里要返回o，不然启动时会报错
    }
}
```

### 环境中获取值

```
import org.springframework.core.env.Environment;

@Resource
Environment environment;
#获取值
environment.resolvePlaceholders("${spring.redis.database}");
```

